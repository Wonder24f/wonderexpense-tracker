<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <link rel="stylesheet" href="style.css">
    <div class="container">
        <h1>Expense Tracker</h1>

        <!-- Form to Add New Expense -->
        <form id="expense-form">
            <input type="date" id="expense-date" required>
            <input type="text" id="expense-description" placeholder="Description" required>
            <input type="number" id="expense-amount" placeholder="Amount" required>
            <select id="expense-category" required>
                <option value="" disabled selected>Category</option>
                <option value="Food">Food</option>
                <option value="Transport">Transport</option>
                <option value="Entertainment">Entertainment</option>
                <option value="Utilities">Utilities</option>
                <option value="Miscellaneous">Miscellaneous</option>
            </select>
            <button type="submit">Add Expense</button>
        </form>

        <!-- Filter by Category -->
        <input type="text" id="filter" placeholder="Filter by category" onkeyup="filterExpenses()">

        <!-- List of Expenses -->
        <ul id="expense-list"></ul>

        <!-- Button to Export to CSV -->
        <button onclick="exportToCSV()">Export to CSV</button>
    </div>

    <script>
        let expenses = [];

        const expenseForm = document.getElementById('expense-form');
        const expenseList = document.getElementById('expense-list');
        const filterInput = document.getElementById('filter');

        // Function to display expenses
        const displayExpenses = (expensesToDisplay) => {
            expenseList.innerHTML = ''; // Clear current list

            expensesToDisplay.forEach(exp => {
                const listItem = document.createElement('li');
                listItem.className = 'expense-item';
                
                listItem.innerHTML = `
                    <div>${exp.date}</div>
                    <div>${exp.description}</div>
                    <div>$${exp.amount}</div>
                    <div>${exp.category}</div>
                `;
                
                expenseList.appendChild(listItem);
            });
        };

        // Function to filter expenses by category
        const filterExpenses = () => {
            const filterValue = filterInput.value.toLowerCase();

            // Filter expenses by category
            const filteredExpenses = expenses.filter(exp => 
                exp.category.toLowerCase().includes(filterValue)
            );

            displayExpenses(filteredExpenses);
        };

        // Function to handle form submission (add new expense)
        expenseForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const newExpense = {
                date: document.getElementById('expense-date').value,
                description: document.getElementById('expense-description').value,
                amount: document.getElementById('expense-amount').value,
                category: document.getElementById('expense-category').value
            };

            expenses.push(newExpense);
            displayExpenses(expenses);

            // Clear the form
            expenseForm.reset();
        });

        // Function to export expenses to CSV format
        const exportToCSV = () => {
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Date,Description,Amount,Category\n"; // CSV headers

            expenses.forEach(exp => {
                csvContent += `${exp.date},${exp.description},${exp.amount},${exp.category}\n`;
            });

            // Create a downloadable CSV file
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement('a');
            link.setAttribute('href', encodedUri);
            link.setAttribute('download', 'expenses.csv');
            document.body.appendChild(link);

            // Trigger download
            link.click();
        };

    </script>
</body>
</html>
